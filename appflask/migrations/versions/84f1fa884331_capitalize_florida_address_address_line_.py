"""capitalize Florida address, address_line_1, address_line_2 in property table

Revision ID: 84f1fa884331
Revises: 8274c974b623
Create Date: 2020-08-16 15:29:52.787432

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '84f1fa884331'
down_revision = '8274c974b623'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    # op.execute(
    #     '''
    #     -- capitalize Florida 'address'
    #     update property set
    #                         address = initcap(address),
    #                         address_line_1 = initcap(address_line_1),
    #                         address_line_2 = initcap(address_line_2),
    #                         city = initcap(city)
    #     where county in ('miamidade', 'broward', 'palmbeach');
    #
    #     -- make uppercase stop words in 'address' attribute
    #     DO
    #     $do$
    #     DECLARE
    #        stop_word varchar[] := '{\,FL, FL, FL\,}';
    #     BEGIN
    #        FOR i IN array_lower(stop_word, 1) .. array_upper(stop_word, 1)
    #        LOOP
    #           update property
    #           set address = replace(initcap(address), initcap(' '||stop_word[i]||' '), ' '||stop_word[i]||' ')
    #           WHERE upper(address) ilike '% '||stop_word[i]||' %'
    #           AND county in ('miamidade', 'broward', 'palmbeach');
    #        END LOOP;
    #     END
    #     $do$;
    #
    #     '''
    # )
    pass
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    pass
    # ### end Alembic commands ###
