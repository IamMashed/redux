"""remove assessment_file column from assessment_dates table

Revision ID: 0255381b2f0c
Revises: 9b6077fb76a2
Create Date: 2020-03-18 13:02:22.828767

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '0255381b2f0c'
down_revision = '9b6077fb76a2'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column('assessment_dates', 'assessment_file')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column(
        'assessment_dates',
        sa.Column('assessment_file', sa.VARCHAR(), autoincrement=False, nullable=False, server_default='')
    )

    op.execute(
        '''
        update assessment_dates
        set assessment_file = 'TX451TWN5RS18400.TXT, TX451TWN1RS6400.TXT, TX451TWN1RS18400.TXT, TX451TWN1RS5400.TXT, TX451TWN2RS5400.TXT, TX451TWN2RS6400.TXT, TX451TWN2RS18400.TXT, TX451TWN3RS5400.TXT, TX451TWN3RS6400.TXT, TX451TWN3RS18400.TXT, TX451TWN3RS18405.TXT, TX451TWN4RS5400.TXT, TX451TWN4RS6400.TXT, TX451TWN4RS18400.TXT, TX451TWN5RS5400.TXT'
        where id in (1, 6, 7) and county='nassau';
        
        update assessment_dates
        set assessment_file = 'assessment.txt'
        where id = 2 and county = 'suffolk';
        
        update assessment_dates
        set assessment_file = 'NAP60F201901.csv, NAL60F201902.csv'
        where id = 3 and county = 'palmbeach';
        
        update assessment_dates
        set assessment_file = 'NAP23F201901.csv, NAL23F201901.csv'
        where id = 4 and county = 'miamidade';

        update assessment_dates
        set assessment_file = 'NAP16F201901.csv, NAL16F201901.csv'
        where id = 5 and county = 'broward';       
        '''
    )

    # ### end Alembic commands ###
