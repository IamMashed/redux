"""case-management updates

Revision ID: b9d39aa0030c
Revises: 655dd03503d3
Create Date: 2020-05-16 22:46:47.438878

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = 'b9d39aa0030c'
down_revision = '655dd03503d3'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('case_application', sa.Column('apn', sa.String(), nullable=True))
    op.add_column('case_application', sa.Column('company_id', sa.Integer(), nullable=True))
    op.add_column('case_application', sa.Column('phone_number_1', sa.String(), nullable=True))
    op.add_column('case_application', sa.Column('phone_number_2', sa.String(), nullable=True))
    op.add_column('case_application', sa.Column('sms_alerts_1', sa.Boolean(), nullable=True))
    op.add_column('case_application', sa.Column('sms_alerts_2', sa.Boolean(), nullable=True))
    op.add_column('case_application', sa.Column('source_id', sa.Integer(), nullable=True))
    op.add_column('case_application', sa.Column('status_id', sa.Integer(), nullable=True))
    op.drop_constraint('fk_CaseApplication_case_company_serving_id', 'case_application', type_='foreignkey')
    op.drop_constraint('fk_CaseApplication_case_application_status_id', 'case_application', type_='foreignkey')
    op.drop_constraint('fk_CaseApplication_case_application_source_id', 'case_application', type_='foreignkey')
    op.create_foreign_key('fk_case_application_status_id', 'case_application', 'case_application_status', ['status_id'], ['id'], onupdate='CASCADE')
    op.create_foreign_key('fk_case_application_source_id', 'case_application', 'case_application_source', ['source_id'], ['id'])
    op.create_foreign_key('fk_case_application_company_id', 'case_application', 'case_company_serving', ['company_id'], ['id'], onupdate='CASCADE')
    op.drop_column('case_application', 'mailing_city')
    op.drop_column('case_application', 'company_serving_id')
    op.drop_column('case_application', 'mailing_state')
    op.drop_column('case_application', 'application_source_id')
    op.drop_column('case_application', 'phone_number')
    op.drop_column('case_application', 'application_status_id')
    op.drop_column('case_application', 'cell_number')
    op.drop_column('case_application', 'city')
    op.drop_column('case_application', 'zip_code')
    op.drop_column('case_application', 'mailing_zip_code')
    op.drop_column('case_application', 'state')
    op.add_column('case_assessment', sa.Column('case_property_id', sa.Integer(), nullable=True))
    op.add_column('case_assessment', sa.Column('state_id', sa.Integer(), nullable=True))
    op.drop_constraint('fk_CaseAssessment_case_property_id', 'case_assessment', type_='foreignkey')
    op.drop_constraint('fk_CaseAssessment_case_assessment_state_id', 'case_assessment', type_='foreignkey')
    op.create_foreign_key('fk_case_assessment_case_property_id', 'case_assessment', 'case_property', ['case_property_id'], ['id'])
    op.create_foreign_key('fk_case_assessment_state_id', 'case_assessment', 'case_assessment_state', ['state_id'], ['id'])
    op.drop_column('case_assessment', 'property_id')
    op.drop_column('case_assessment', 'assessment_state_id')
    op.add_column('case_client', sa.Column('company_id', sa.Integer(), nullable=True))
    op.add_column('case_client', sa.Column('phone_number_1', sa.String(), nullable=True))
    op.add_column('case_client', sa.Column('phone_number_2', sa.String(), nullable=True))
    op.add_column('case_client', sa.Column('property_address', sa.String(), nullable=True))
    op.add_column('case_client', sa.Column('sms_alerts_1', sa.Boolean(), nullable=True))
    op.add_column('case_client', sa.Column('sms_alerts_2', sa.Boolean(), nullable=True))
    op.add_column('case_client', sa.Column('type_id', sa.Integer(), nullable=True))
    op.create_unique_constraint('uc_case_client_email', 'case_client', ['email'])
    op.drop_constraint('uc_CaseClient_email', 'case_client', type_='unique')
    op.drop_constraint('fk_CaseClient_case_company_serving_id', 'case_client', type_='foreignkey')
    op.drop_constraint('fk_CaseClient_case_client_type_id', 'case_client', type_='foreignkey')
    op.create_foreign_key('fk_case_client_type_id', 'case_client', 'case_client_type', ['type_id'], ['id'])
    op.create_foreign_key('fk_case_client_company_id', 'case_client', 'case_company_serving', ['company_id'], ['id'])
    op.drop_column('case_client', 'mailing_city')
    op.drop_column('case_client', 'company_serving_id')
    op.drop_column('case_client', 'mailing_state')
    op.drop_column('case_client', 'phone_number')
    op.drop_column('case_client', 'cell_number')
    op.drop_column('case_client', 'client_type_id')
    op.drop_column('case_client', 'zip_code')
    op.drop_column('case_client', 'city')
    op.drop_column('case_client', 'mailing_zip_code')
    op.drop_column('case_client', 'state')
    op.drop_column('case_client', 'sms_alerts')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('case_client', sa.Column('sms_alerts', sa.BOOLEAN(), autoincrement=False, nullable=False))
    op.add_column('case_client', sa.Column('state', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('mailing_zip_code', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('city', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('zip_code', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('client_type_id', sa.INTEGER(), autoincrement=False, nullable=False))
    op.add_column('case_client', sa.Column('cell_number', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('phone_number', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('mailing_state', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('company_serving_id', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_client', sa.Column('mailing_city', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.drop_constraint('fk_case_client_company_id', 'case_client', type_='foreignkey')
    op.drop_constraint('fk_case_client_type_id', 'case_client', type_='foreignkey')
    op.create_foreign_key('fk_CaseClient_case_client_type_id', 'case_client', 'case_client_type', ['client_type_id'], ['id'])
    op.create_foreign_key('fk_CaseClient_case_company_serving_id', 'case_client', 'case_company_serving', ['company_serving_id'], ['id'])
    op.create_unique_constraint('uc_CaseClient_email', 'case_client', ['email'])
    op.drop_constraint('uc_case_client_email', 'case_client', type_='unique')
    op.drop_column('case_client', 'type_id')
    op.drop_column('case_client', 'sms_alerts_2')
    op.drop_column('case_client', 'sms_alerts_1')
    op.drop_column('case_client', 'property_address')
    op.drop_column('case_client', 'phone_number_2')
    op.drop_column('case_client', 'phone_number_1')
    op.drop_column('case_client', 'company_id')
    op.add_column('case_assessment', sa.Column('assessment_state_id', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_assessment', sa.Column('property_id', sa.INTEGER(), autoincrement=False, nullable=True))
    op.drop_constraint('fk_case_assessment_state_id', 'case_assessment', type_='foreignkey')
    op.drop_constraint('fk_case_assessment_case_property_id', 'case_assessment', type_='foreignkey')
    op.create_foreign_key('fk_CaseAssessment_case_assessment_state_id', 'case_assessment', 'case_assessment_state', ['assessment_state_id'], ['id'])
    op.create_foreign_key('fk_CaseAssessment_case_property_id', 'case_assessment', 'case_property', ['property_id'], ['id'])
    op.drop_column('case_assessment', 'state_id')
    op.drop_column('case_assessment', 'case_property_id')
    op.add_column('case_application', sa.Column('state', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('mailing_zip_code', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('zip_code', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('city', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('cell_number', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('application_status_id', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('phone_number', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('application_source_id', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('mailing_state', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('company_serving_id', sa.INTEGER(), autoincrement=False, nullable=True))
    op.add_column('case_application', sa.Column('mailing_city', sa.VARCHAR(), autoincrement=False, nullable=True))
    op.drop_constraint('fk_case_application_company_id', 'case_application', type_='foreignkey')
    op.drop_constraint('fk_case_application_source_id', 'case_application', type_='foreignkey')
    op.drop_constraint('fk_case_application_status_id', 'case_application', type_='foreignkey')
    op.create_foreign_key('fk_CaseApplication_case_application_source_id', 'case_application', 'case_application_source', ['application_source_id'], ['id'])
    op.create_foreign_key('fk_CaseApplication_case_application_status_id', 'case_application', 'case_application_status', ['application_status_id'], ['id'], onupdate='CASCADE')
    op.create_foreign_key('fk_CaseApplication_case_company_serving_id', 'case_application', 'case_company_serving', ['company_serving_id'], ['id'], onupdate='CASCADE')
    op.drop_column('case_application', 'status_id')
    op.drop_column('case_application', 'source_id')
    op.drop_column('case_application', 'sms_alerts_2')
    op.drop_column('case_application', 'sms_alerts_1')
    op.drop_column('case_application', 'phone_number_2')
    op.drop_column('case_application', 'phone_number_1')
    op.drop_column('case_application', 'company_id')
    op.drop_column('case_application', 'apn')
    # ### end Alembic commands ###
